        -:    0:Source:/home/minerkow/Рабочий стол/CS_Programm/AVL_Tree/AVL_Iterator.c
        -:    0:Graph:/home/minerkow/Рабочий стол/CS_Programm/AVL_Tree/cmake-build-debug/CMakeFiles/AVL_Tree_Test.dir/AVL_Iterator.c.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    1:#include "AVL_Tree.h"
        -:    2:
        -:    3://*Return begin iterator
        -:    4:static struct Node_t* avlBeginIt_(struct AVL_Tree* avlTree);
        -:    5:
        -:    6://*Return end iterator
        -:    7:static struct Node_t* avlEndIt_(struct AVL_Tree* avlTree);
        -:    8:
        -:    9://*If the next element exists returns an iterator to it,
        -:   10://*else returns a empty iterator
        -:   11:static struct Node_t* avlNextIt_(struct Node_t* it);
        -:   12:
        -:   13://*If the prev element exists returns an iterator to it,
        -:   14://*else returns a empty iterator
        -:   15:static struct Node_t* avlPrevIt_(struct Node_t* it);
        -:   16:
        -:   17://-----------------------------------------------------------------------------------------------------------
        -:   18:
        -:   19:struct Node_t {
        -:   20:    struct Node_t* left_;
        -:   21:    struct Node_t* right_;
        -:   22:    struct Node_t* prev_;
        -:   23:
        -:   24:    int balance_factor;
        -:   25:
        -:   26:    int data_;
        -:   27:};
        -:   28:
        -:   29:struct AVL_Tree {
        -:   30:    struct Node_t* top_;
        -:   31:
        -:   32:    size_t size_;
        -:   33:};
        -:   34:
        -:   35://------------------------------------------------------------------------------------------
        -:   36:
    #####:   37:bool avlEmptyIt(struct Node_t* it) {
    #####:   38:    if (it == NULL) {
    %%%%%:   38-block  0
    #####:   39:        return true;
    %%%%%:   39-block  0
        -:   40:    }
    #####:   41:    return false;
    %%%%%:   41-block  0
        -:   42:}
        -:   43:
    #####:   44:struct Node_t* avlNextIt_(struct Node_t* it) {
    #####:   45:    if (it == NULL) {
    %%%%%:   45-block  0
    #####:   46:        return it;
    %%%%%:   46-block  0
        -:   47:    }
    #####:   48:    if (it->prev_ == NULL) {
    %%%%%:   48-block  0
    #####:   49:        it = it->right_;
    #####:   50:        struct Node_t* tmp = it;
    #####:   51:        while (it != NULL) {
    %%%%%:   51-block  0
    %%%%%:   51-block  1
    #####:   52:            tmp = it;
    #####:   53:            it = it->left_;
    %%%%%:   53-block  0
        -:   54:        }
    #####:   55:        return tmp;
    %%%%%:   55-block  0
        -:   56:    }
    #####:   57:    if (it->right_ != NULL) {
    %%%%%:   57-block  0
    #####:   58:        it = it->right_;
    #####:   59:        struct Node_t* tmp = it;
    #####:   60:        while (it != NULL) {
    %%%%%:   60-block  0
    %%%%%:   60-block  1
    #####:   61:            tmp = it;
    #####:   62:            it = it->left_;
    %%%%%:   62-block  0
        -:   63:        }
    #####:   64:        return tmp;
    %%%%%:   64-block  0
        -:   65:    }
    #####:   66:    if (it->prev_->left_ == it) {
    %%%%%:   66-block  0
    #####:   67:        it = it->prev_;
    #####:   68:        return it;
    %%%%%:   68-block  0
        -:   69:    }
    #####:   70:    if (it->prev_->right_ == it) {
    %%%%%:   70-block  0
    #####:   71:        struct Node_t* tmp = it->prev_;
    #####:   72:        while (tmp->prev_ != NULL && tmp->prev_->left_ != tmp) {
    %%%%%:   72-block  0
    %%%%%:   72-block  1
    %%%%%:   72-block  2
    #####:   73:            tmp = tmp->prev_;
    %%%%%:   73-block  0
        -:   74:        }
    #####:   75:        if (tmp->prev_ == NULL) {
    %%%%%:   75-block  0
    #####:   76:            it = NULL;
    #####:   77:            return it;
    %%%%%:   77-block  0
        -:   78:        }
    #####:   79:        it = tmp->prev_;
    #####:   80:        return it;
    %%%%%:   80-block  0
        -:   81:    }
        -:   82:    assert(1 && "Ooooops");
    #####:   83:    return it;
    %%%%%:   83-block  0
        -:   84:}
        -:   85:
    #####:   86:struct Node_t* avlPrevIt_(struct Node_t* it) {
    #####:   87:    if (it == NULL) {
    %%%%%:   87-block  0
    #####:   88:        return it;
    %%%%%:   88-block  0
        -:   89:    }
    #####:   90:    if (it->prev_ == NULL) {
    %%%%%:   90-block  0
    #####:   91:        it = it->left_;
    #####:   92:        struct Node_t* tmp = it;
    #####:   93:        while (it != NULL) {
    %%%%%:   93-block  0
    %%%%%:   93-block  1
    #####:   94:            tmp = it;
    #####:   95:            it = it->right_;
    %%%%%:   95-block  0
        -:   96:        }
    #####:   97:        return tmp;
    %%%%%:   97-block  0
        -:   98:    }
    #####:   99:    if (it->left_ != NULL) {
    %%%%%:   99-block  0
    #####:  100:        it = it->left_;
    #####:  101:        struct Node_t* tmp = it;
    #####:  102:        while (it != NULL) {
    %%%%%:  102-block  0
    %%%%%:  102-block  1
    #####:  103:            tmp = it;
    #####:  104:            it = it->right_;
    %%%%%:  104-block  0
        -:  105:        }
    #####:  106:        return tmp;
    %%%%%:  106-block  0
        -:  107:    }
    #####:  108:    if (it->prev_->right_ == it) {
    %%%%%:  108-block  0
    #####:  109:        it = it->prev_;
    #####:  110:        return it;
    %%%%%:  110-block  0
        -:  111:    }
    #####:  112:    if (it->prev_ == NULL) {
    %%%%%:  112-block  0
    #####:  113:        it = it->left_;
    #####:  114:        return it;
    %%%%%:  114-block  0
        -:  115:    }
    #####:  116:    if (it->prev_->left_ == it) {
    %%%%%:  116-block  0
    #####:  117:        struct Node_t* tmp = it->prev_;
    #####:  118:        while (tmp->prev_ != NULL && tmp->prev_->right_ == tmp) {
    %%%%%:  118-block  0
    %%%%%:  118-block  1
    %%%%%:  118-block  2
    #####:  119:            tmp = tmp->prev_;
    %%%%%:  119-block  0
        -:  120:        }
    #####:  121:        if (tmp->prev_ == NULL) {
    %%%%%:  121-block  0
    #####:  122:            it = NULL;
    #####:  123:            return it;
    %%%%%:  123-block  0
        -:  124:        }
    #####:  125:        it = tmp->prev_->left_;
    #####:  126:        return it;
    %%%%%:  126-block  0
        -:  127:    }
        -:  128:    assert(1 && "Ooooops");
    #####:  129:    return it;
    %%%%%:  129-block  0
        -:  130:}
        -:  131:
    #####:  132:int avlGetDataByIt(struct Node_t* it) {
    #####:  133:    if (it == NULL) {
    %%%%%:  133-block  0
    #####:  134:        return NAN;
    %%%%%:  134-block  0
        -:  135:    }
    #####:  136:    return it->data_;
    %%%%%:  136-block  0
        -:  137:}
        -:  138:
    #####:  139:bool avlEqualIt(struct Node_t* it1, struct Node_t* it2) {
    #####:  140:    if (it1 == it2) {
    %%%%%:  140-block  0
    #####:  141:        return true;
    %%%%%:  141-block  0
        -:  142:    }
    #####:  143:    return false;
    %%%%%:  143-block  0
        -:  144:}
        -:  145:
    #####:  146:struct Node_t* avlBeginIt_(struct AVL_Tree* avlTree) {
    #####:  147:    if (avlTree == NULL) {
    %%%%%:  147-block  0
    #####:  148:        return NULL;
    %%%%%:  148-block  0
        -:  149:    }
    #####:  150:    struct Node_t* tmp = avlTree->top_;
    #####:  151:    while (tmp->left_ != NULL) {
    %%%%%:  151-block  0
    %%%%%:  151-block  1
    #####:  152:        tmp =tmp->left_;
    %%%%%:  152-block  0
        -:  153:    }
    #####:  154:    return tmp;
    %%%%%:  154-block  0
        -:  155:}
        -:  156:
    #####:  157:struct Node_t* avlEndIt_(struct AVL_Tree* avlTree) {
    #####:  158:    if (avlTree == NULL) {
    %%%%%:  158-block  0
    #####:  159:        return NULL;
    %%%%%:  159-block  0
        -:  160:    }
    #####:  161:    struct Node_t* tmp = avlTree->top_;
    #####:  162:    while (tmp->right_ != NULL) {
    %%%%%:  162-block  0
    %%%%%:  162-block  1
    #####:  163:        tmp =tmp->right_;
    %%%%%:  163-block  0
        -:  164:    }
    #####:  165:    return tmp;
    %%%%%:  165-block  0
        -:  166:}
        -:  167:
    #####:  168:int avlGetMaxElem(struct AVL_Tree* avlTree) {
    #####:  169:    struct Node_t* it = avlEndIt_(avlTree);
    %%%%%:  169-block  0
    #####:  170:    if (!it) {
    #####:  171:        return NAN;
    %%%%%:  171-block  0
        -:  172:    }
    #####:  173:    return it->data_;
    %%%%%:  173-block  0
        -:  174:}
        -:  175:
    #####:  176:int avlGetMinElem(struct AVL_Tree* avlTree) {
    #####:  177:    struct Node_t* it = avlBeginIt_(avlTree);
    %%%%%:  177-block  0
    #####:  178:    if (!it) {
    #####:  179:        return NAN;
    %%%%%:  179-block  0
        -:  180:    }
    #####:  181:    return it->data_;
    %%%%%:  181-block  0
        -:  182:}
        -:  183:
    #####:  184:enum AvlError_t avlSaveInArray(struct AVL_Tree* avlTree, int* array, size_t lenArray) {
    #####:  185:    if (!avlTree) {
    %%%%%:  185-block  0
    #####:  186:        return AVLERR_NOT_INIT;
    %%%%%:  186-block  0
        -:  187:    }
    #####:  188:    if (lenArray == 0) {
    %%%%%:  188-block  0
    #####:  189:        return AVLERR_OK;
    %%%%%:  189-block  0
        -:  190:    }
    #####:  191:    if (array == NULL) {
    %%%%%:  191-block  0
    #####:  192:        return AVLERR_NULL_POINTER_ARG;
    %%%%%:  192-block  0
        -:  193:    }
    #####:  194:    struct Node_t* it = avlBeginIt_(avlTree);
    %%%%%:  194-block  0
    #####:  195:    for (size_t i = 0; i < lenArray; ++i) {
    %%%%%:  195-block  0
    #####:  196:        if (it == NULL) {
    %%%%%:  196-block  0
    #####:  197:            break;
    %%%%%:  197-block  0
        -:  198:        }
    #####:  199:        array[i] = avlGetDataByIt(it);
    %%%%%:  199-block  0
    #####:  200:        it = avlNextIt_(it);
        -:  201:    }
    #####:  202:    return AVLERR_OK;
    %%%%%:  202-block  0
        -:  203:}
